<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Djangodash: послесловие - trilandev.com</title>
  <link href="../.././feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="trilandev.com ATOM Feed" />
  <link rel="shortcut icon" href="../.././theme/favicon.ico">
  <link rel="stylesheet" href="../.././theme/css/style.css">
  
  
  <script src="../.././theme/js/modernizr-1.6.min.js"></script>
</head>
<body>
  <div id="container">
    <header class="main">
      <nav class="class-for-20px"><span>trilandev.com &rsaquo; <a href="../../.">блог</a></span></nav>
    </header>
    <section class="main">
  <article>
    <header class="clearfix">
      <h1 class="class-for-28px">Djangodash: послесловие</h1>
      <time datetime="2011-09-07T00:00:00" pubdate class="class-for-16px">07 сентября 2011</time>
    </header>
    <p>Так получилось, что об участии в <a class="reference external" href="http://djangodash.com">Djangodash</a> мы никому особо и не рассказывали.
Лично я, да и Миша с Наташей, думаю, расценивали этот конкурс, как веселое
времяпрепровождение, ну и силы попробовать, конечно, было интересно.</p>
<p>Команду планировалось назвать Losers, но что-то пошло не так, и получилось
Loosers :)))</p>
<p>Перед тем, как собраться в первый раз, каждый из нас должен был подумать насчет
идеи проекта. У меня ничего толкового не придумалось, а когда собрались, Наташа
предложила сервис, который позволяет найти неоптимальный и устаревший код в
Django приложениях и проектах. Так как больше ничего интересного в голову не
пришло, мы остановились на этой идее.</p>
<p>До участия в Djangodash мы решили потренироваться, как нам тогда казалось, на
простом проекте. Мы чуть-чуть порисовали, обсудили пару моментов и сели
&quot;кодить&quot;. В процессе мы поняли, что сильно промахнулись, решив сесть за
реализацию, не обговорив все мелочи. В какой-то момент мы все бросили и сели
заново обсуждать. В итоге большую часть кода пришлось переписывать. Это был
очень полезный урок перед конкурсом: мы начали понимать, как надо распределять
задачи, и до какой степени нужно продумать работу сервиса, чтобы таких проблем
не возникло.</p>
<p>Перед конкурсом у нас была исписана куча стикеров с задачами, и каждый
предельно ясно представлял, в каком направлении он будет работать. Наташа была
ответственная за дизайн и верстку, за мной были задачи celery и деплой с
помощью chef и fabric на VDS. Мише предстояла самая сложная задача -
анализирование кода с помощью стандартной библиотеки AST.</p>
<p>Выспавшись, мы встали в 4 утра, и сели за реализацию, забирая себе стикеры с
задачами, над которыми собирались трудиться. Сразу договорились покрывать
максимальное количество кода тестами. Часть функционала сначала просто
прототипировали, постепенно заменяя прототипы реальным кодом.</p>
<p>За все время мы столкнулись с некоторыми сложностями, связанными с Celery и
AST:</p>
<ol class="arabic simple">
<li>Celery попросту не запускалась, причиной была несовместимость последних
версий некоторых пакетов (помоему django-kombu и Celery, но я могу
ошибаться). Также, задача, в которой происходило клонирование, раздувалась
в памяти, видимо что-то вызывало утечки. Решили мы данную проблему
достаточно быстро, настроив Celery таким образом, чтобы она перезапускала
воркер после каждой отработанной задачи.</li>
<li>С AST проблемы начались после деплоя на виртуальную машину: некоторые
результаты анализа кода получались не правильными, хотя локально мы этого не
наблюдали. Заметив, что на виртуальной машине Python2.6, а на наших машинах
2.7, мы приняли решение вместо Ubuntu 10.10 использовать для деплоя Ubuntu
11.04.</li>
</ol>
<p>Искать причины некоторых проблем во время конкурса мы не стали, потому что
анализ занял бы слишком много времени.</p>
<p>По поводу дедлайна: мы не почуствовали никакого дедлайна :). Мы спокойно
прерывались, в перерывах смотрели &quot;Во все тяжкие&quot; и ели мороженку :). С субботы
на воскресение выспались. Все запустить удалось уже около 11 вечера в
воскресение. Спокойно легли спать, а с утра пошли на работу.</p>
<p>В итоге, мы допустили одну очень обидную ошибку: при клонировании репозитория,
мы не проверяли ни язык репозитория, ни его размеры. Добрые люди не пренебрегли
поставить ядро Linux на проверку, что подвесило Celery. Практически сразу после
окончания конкурса мы исправили этот косяк и запустили еще одну версию сервиса
на <a class="reference external" href="http://djangolint.com">djangolint.com</a>, где сейчас он и находится. Судьям были отправлены
уведомления о необходимости зайти на сервер и перезапустить Celery.</p>
<p>Djangodash мне запомнился тем, что было весело. Ну и победой, конечно :D</p>

    <footer class="clearfix">
      <div class="class-for-16px author">Дима Кукушкин</div>
      <div class="class-for-16px tags"><a href="../.././tag/django.html">django</a>, <a href="../.././tag/djangodash.html">djangodash</a>, <a href="../.././tag/djangolint.html">djangolint</a></div>
    </footer>
  </article>
  <div id="comments">
    <h1 class="class-for-24px">Комментарии</h1>
    <div id="disqus_thread"></div>
    <script>
      var disqus_shortname = 'trilandev';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
    <footer class="main">
      <p>Powered by <a href="http://pelican.notmyidea.org/">Pelican</a></p>
    </footer>
  </div>
  <script>
    var _gaq = [['_setAccount', 'UA-9614815-3'], ['_trackPageview']];
    (function(d, t) {
      var g = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      g.async = true;
      g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g, s);
    })(document, 'script');
  </script>
</body>
</html>